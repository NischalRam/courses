= Building a Knowledge Graph
:order: 3
:type: challenge

= Building a Knowledge Graph

== Using Cypher's CREATE Keyword to Create Data

Cypher is the declarative graph query language that allows for efficient and expressive data operations in Neo4j. One of the fundamental operations in Cypher is the creation of data, which is achieved using the `CREATE` keyword. 

To create a node, you use the `CREATE` keyword followed by a pair of parentheses `()`. Inside the parentheses, you specify the label of the node. For instance, to create a node with the label `Person`, you would write `CREATE (:Person)`. 

To create a relationship between two nodes, you use the `CREATE` keyword followed by a pattern describing the relationship. For instance, to create a `KNOWS` relationship between two `Person` nodes, you would write `CREATE (a:Person)-[:KNOWS]->(b:Person)`.

== Graph Local Queries Focus on Specific Parts of the Graph

In contrast to global graph operations that involve traversing the entire graph, graph local queries focus on specific parts of the graph. These queries are particularly useful when you are interested in the relationships between a small set of nodes.

For instance, to find all the people that a specific person knows, you would write a query like `MATCH (a:Person {name: 'Alice'})-[:KNOWS]->(b:Person) RETURN b`. This query starts from the `Person` node representing Alice and follows the `KNOWS` relationships to find all the people that Alice knows.

== Functions and Procedures in Cypher Queries

Cypher provides a rich set of functions and procedures that can be used to perform complex computations and operations within queries. Functions are used to perform computations on the properties of nodes and relationships, while procedures are used to perform operations that affect the state of the database.

For instance, the `avg()` function can be used to compute the average age of all `Person` nodes: `MATCH (a:Person) RETURN avg(a.age)`. On the other hand, the `apoc.create.node()` procedure can be used to create a node with a specific set of properties: `CALL apoc.create.node(['Person'], {name: 'Alice', age: 30})`.

== Understanding Neo4j Internals for Performance Optimization

Understanding the internals of Neo4j can help you write more efficient queries and optimize the performance of your graph database. 

One key aspect of Neo4j's internals is its storage engine, which is optimized for storing and retrieving graph data. Each node, relationship, and property in the graph is stored as a record in the database. When you perform a query, Neo4j uses indexes to quickly locate the records that match your query.

Another important aspect is the query execution plan, which describes the steps that Neo4j takes to execute a query. By examining the query execution plan, you can identify potential performance bottlenecks and optimize your queries accordingly.

In conclusion, building a knowledge graph in Neo4j involves creating data using the `CREATE` keyword, focusing on specific parts of the graph with local queries, using functions and procedures to perform complex operations, and understanding Neo4j's internals to optimize performance.

== Check Your Understanding

include::questions/1-cypher-create-keyword.adoc[leveloffset=+1]

include::questions/2-graph-local-queries.adoc[leveloffset=+1]

include::questions/3-functions-and-procedures.adoc[leveloffset=+1]

[.summary]
== Lesson Summary

TODO: Generate lesson summary
